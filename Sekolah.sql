CREATE TABLE guru (
  ID_GURU NUMBER PRIMARY KEY,
  NAMA VARCHAR2(100),
  MAPEL_SPESIALIS VARCHAR2(50)
);

CREATE TABLE mapel (
   id_mapel NUMBER PRIMARY KEY,
   nama_mapel VARCHAR(50)
);

CREATE TABLE kelas(
   id_kelas NUMBER PRIMARY KEY,
   nama_kelas VARCHAR(20),
   wali_kelas NUMBER,
   CONSTRAINT fk_wali_kelas FOREIGN KEY(wali_kelas)REFERENCES GURU(ID_GURU)
);

CREATE TABLE siswa(
   id_siswa NUMBER PRIMARY KEY,
   nama VARCHAR (50),
   id_kelas NUMBER,
   CONSTRAINT fk_kelas FOREIGN KEY (id_kelas) REFERENCES kelas(id_kelas)
);

SELECT * FROM GURU;


CREATE TABLE jadwal(
   id_jadwal NUMBER PRIMARY KEY,
   id_kelas NUMBER,
   id_mapel NUMBER,
   ID_GURU NUMBER,
   hari VARCHAR (20),
   jam VARCHAR (200),
   CONSTRAINT fk_jadwal_kelas FOREIGN KEY (id_kelas) REFERENCES kelas (id_kelas),
   CONSTRAINT fk_jadwal_mapel FOREIGN KEY (id_mapel) REFERENCES mapel (id_mapel),
   CONSTRAINT fk_jadwal_guru FOREIGN KEY (ID_GURU) REFERENCES GURU (ID_GURU)
);

DROP TABLE jadwal;

CREATE TABLE nilai(
   id_nilai NUMBER PRIMARY KEY,
   id_siswa NUMBER,
   id_mapel NUMBER,
   nilai NUMBER,
   CONSTRAINT  fk_nilai_siswa FOREIGN KEY (id_siswa) REFERENCES siswa (id_siswa),
   CONSTRAINT  fk_nilai_mapel FOREIGN KEY (id_mapel) REFERENCES mapel (id_mapel)
);

SELECT USER FROM DUAL;
SELECT * FROM SESSION_PRIVS WHERE PRIVILEGE = 'DBA';
SELECT * FROM USER_TS_QUOTAS;


INSERT INTO GURU VALUES (1,'Budi','B.Indonesia');
INSERT INTO GURU VALUES(2,'Sri','Matematika');
INSERT INTO GURU VALUES(3,'Rudi','B.Inggris');
INSERT INTO GURU VALUES(4,'Wahyu','IPA');
INSERT INTO GURU VALUES(5,'Linda','Seni');
COMMIT;
ROLLBACK;

SELECT * FROM GURU;

INSERT INTO MAPEL VALUES (001,'B.Indonesia');
INSERT INTO MAPEL VALUES(002,'Matematika');
INSERT INTO MAPEL VALUES(003,'B.Inggris');
INSERT INTO MAPEL VALUES(004,'IPA');
INSERT INTO MAPEL VALUES(005,'Seni');

SELECT * FROM MAPEL;
COMMIT;

INSERT INTO KELAS VALUES (101,'6A',1);
INSERT INTO KELAS VALUES (102,'6B',3);
INSERT INTO KELAS VALUES (103,'6C',5);
SELECT * FROM KELAS;
COMMIT;
ROLLBACK;

INSERT INTO SISWA VALUES (1111,'Fajar',101);
INSERT INTO SISWA VALUES (2222,'Jarwo',101);
INSERT INTO SISWA VALUES (3333,'Haikal',101);
INSERT INTO SISWA VALUES (4444,'Sunan',102);
INSERT INTO SISWA VALUES (5555,'Ilham',102);
INSERT INTO SISWA VALUES (6666,'Ozzi',102);
INSERT INTO SISWA VALUES (7777,'Ardhi',102);
INSERT INTO SISWA VALUES (8888,'Mawar',103);
INSERT INTO SISWA VALUES (9999,'Melati',103);
SELECT * FROM SISWA;
COMMIT;


INSERT INTO JADWAL VALUES (1101,101,1,1,'senin','08:00');
INSERT INTO JADWAL VALUES (2202,102,2,2,'selasa','09:00');
INSERT INTO JADWAL VALUES (3303,103,3,3,'rabu','10:00');
INSERT INTO JADWAL VALUES (3304,103,4,4,'kamis','11:00');
INSERT INTO JADWAL VALUES (3305,101,5,5,'jum at','13:00');
SELECT * FROM JADWAL;
COMMIT;


INSERT INTO NILAI VALUES (1001,1111,1,90);
INSERT INTO NILAI VALUES (2002,2222,2,80);
INSERT INTO NILAI VALUES (3003,3333,3,75);
INSERT INTO NILAI VALUES (3004,4444,4,85);
INSERT INTO NILAI VALUES (3005,5555,5,70);
INSERT INTO NILAI VALUES (1006,6666,1,60);
INSERT INTO NILAI VALUES (2007,7777,2,80);
INSERT INTO NILAI VALUES (3008,8888,3,90);
INSERT INTO NILAI VALUES (3009,9999,4,95);

SELECT * FROM NILAI;
COMMIT;



-- menampilkan nilai dari siswa dengan pelajaran b.indonesia di kelas 6a
SELECT 
s.nama AS nama,
k.nama_kelas,
m.nama_mapel,
n.nilai
FROM
SISWA s
JOIN
KELAS k ON s.ID_KELAS = k.ID_KELAS
JOIN
NILAI n ON s.ID_SISWA = n.ID_SISWA
JOIN
MAPEL m ON n.ID_MAPEL = m.ID_MAPEL
WHERE
m.NAMA_MAPEL = 'B.Indonesia'
AND k.NAMA_KELAS = '6A';